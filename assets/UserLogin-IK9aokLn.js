import{d as h,aa as _,ab as f,r as k,b as i,i as d,u as g,j as n,p as w,ac as v,W as y,a0 as b,a1 as U,E as I}from"./index-Cs5TfYef.js";const l={getUsernamePassword:s=>{let t="";switch(s.substring(0,2)){case"f.":t="family";break;case"r.":t="friend";break;case"a.":t="admin";break}const e=s.substring(2);return{username:t,password:e}},login:(s,t,e,c)=>s.login({data:{username:t,password:e},redirect:c,staySignedIn:!1,fetchUser:!0,cacheUser:!0,responseType:"json"})},S=s=>(b("data-v-513de2d2"),s=s(),U(),s),x={id:"login"},L={key:0,class:"form"},B={class:"field first"},P={key:1},R=S(()=>n("h2",null,"Loading authentication...",-1)),T=[R],j=h({__name:"UserLogin",setup(s){const t=_(),e=f(),c=k(""),p=()=>{e.check(),e.check("family"),e.check("friend"),e.check("admin"),e.user(),e.token(),e.currentToken},u=()=>{const{username:a,password:o}=l.getUsernamePassword(c.value);l.login(e,a,o,m()).then(r=>{p()}).catch(r=>{console.error(r)})},m=()=>{var r;const a=t.currentRoute.value.redirectedFrom,o={name:a?(r=a.name)==null?void 0:r.toString():"home"};return a&&a.params&&(o.params=a.params),o};return(a,o)=>(i(),d("section",x,[g(e).ready()?(i(),d("div",L,[n("div",B,[w(n("input",{onKeyup:y(u,["enter"]),type:"password",name:"password",id:"password",placeholder:"password","onUpdate:modelValue":o[0]||(o[0]=r=>c.value=r)},null,544),[[v,c.value]])]),n("ul",{class:"actions"},[n("li",null,[n("button",{onClick:u,class:"special"},"Login")])])])):(i(),d("div",P,T))]))}}),C=I(j,[["__scopeId","data-v-513de2d2"]]);export{C as default};
